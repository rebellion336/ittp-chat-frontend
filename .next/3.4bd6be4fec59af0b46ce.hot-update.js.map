{"version":3,"sources":["webpack:///./component/loan/bindingIdForm.js?5206","webpack:///./tools/validators.js?07b7"],"names":["FormItem","Form","Item","BindingIdForm","props","handleSubmit","bind","event","preventDefault","form","validateFields","err","values","citizenId","customerInfo","id","platform","value","postJSON","error","console","log","getFieldDecorator","textAlign","rules","required","message","validator","validCitizenId","color","create","rule","callback","i","sum","undefined","length","parseFloat","charAt","validDate","date","split","year","birthDate","moment","isValid","birthYear"],"mappings":"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","file":"3.4bd6be4fec59af0b46ce.hot-update.js","sourcesContent":["import { Component } from 'react'\nimport { Form, Icon, Input, Button } from 'antd'\nimport {API_SERVER , postJSON} from '../../tools/api'\nimport {validCitizenId} from '../../tools/validators'\n\nconst FormItem = Form.Item;\n\nclass BindingIdForm extends Component {\n\n    constructor(props){\n        super(props)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n    \n    async handleSubmit(event) {\n        event.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                try{\n                    const {citizenId} = values\n                    const { id , platform } = this.props.customerInfo\n                    const value = {\n                        id: id,\n                        citizenId : citizenId,\n                        platform: platform\n                    }\n                    postJSON(\n                        `${API_SERVER}/chats/line/binding`,\n                        value\n                    )\n                }\n                catch(error){\n                    console.error(error)\n                }\n            }\n            else{\n                console.log('Error')\n            }\n        })\n    }\n\n    render() {\n        const { getFieldDecorator } = this.props.form\n        return (\n          <Form onSubmit={this.handleSubmit} style={{textAlign:'center'}} >\n            <br/>\n            <p>ลูกต้าไม่มีประวัติ</p>\n            <br/>\n            <FormItem>\n              {getFieldDecorator('citizenId', {\n                rules: [\n                    { \n                        required: true, \n                        message: 'โปรดใส่เลขบัตรประชาชนของลูกค้า' \n                    },\n                    {\n                        validator: validCitizenId\n                    }\n                ],\n              })(\n                <Input prefix={<Icon type=\"idcard\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"บัตรประชาชนของลูกค้า\" />\n              )}\n            </FormItem>\n            <Button type=\"primary\" htmlType=\"submit\">\n                Binding CitizenId\n            </Button>\n          </Form>\n        );\n    }\n    \n}\nexport default Form.create()(BindingIdForm);\n\n\n// WEBPACK FOOTER //\n// ./component/loan/bindingIdForm.js","import moment from 'moment'\n\nexport const validCitizenId = (rule, value, callback) => {\n  let i = 0\n  let sum = 0\n  const id = value\n  if (id !== undefined) {\n    if (id.length < 13) callback('กรุณากรอกรหัสบัตรประชาชนให้ครบ 13 หลัก')\n    for (i = 0, sum = 0; i < 12; i += 1)\n      sum += parseFloat(id.charAt(i)) * (13 - i)\n    if ((11 - (sum % 11)) % 10 !== parseFloat(id.charAt(12))) {\n      callback('รหัสบัตรประชาชนไม่ถูกต้องกรุณากรอกใหม่อีกครั้ง')\n    }\n  }\n  callback()\n}\nexport const validDate = (rule, value, callback) => {\n  // Not yet complete YYYY-MM-DD\n  if (value === undefined) {\n    callback()\n  } else if (value.length < 10) {\n    callback('กรุณากรอกวันที่เดือนปี เช่น 13-07-2526')\n  } else {\n    // Accept only YYYY-MM-DD\n    const date = value.split('-')\n    const year = (date[2] - 543) % 4\n    const birthDate = moment(value, 'YYYY-MM-DD', true)\n    if (!birthDate.isValid()) {\n      // Our system will convert DD-MM-YYYY to YYYY-MM-DD\n      if (date[0] > 0 && date[0] <= 29 && date[1] === '02' && year === 0) {\n        callback()\n      }\n      callback('กรุณากรอกวันที่เดือนปี เช่น 13-07-2526')\n    } else {\n      const birthYear = birthDate.year()\n      if (birthYear < 1900) {\n        callback('กรุณากรอกปี พ.ศ.')\n      }\n      callback()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./tools/validators.js"],"sourceRoot":""}